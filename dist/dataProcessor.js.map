{"version":3,"sources":["../src/dataProcessor.js"],"names":["functions","scale","offset","delta","fluctuation","top","_","partial","extraction","bottom","factor","datapoints","map","point","i","length","newSeries","deltaValue","push","flucValue","order","n","orderFunc","timeseriesData","orderByCallback","datapointsAggFuncs","sortByIteratee","ts","sortedTsData","sortBy","slice","reverse","avg","datapointsAvg","min","datapointsMin","max","datapointsMax","sum","datapointsSum","meanBy","minPoint","minBy","maxPoint","maxBy","sumBy","aaFunctions"],"mappings":"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","sourcesContent":["import _ from 'lodash';\n\nconst functions = {\n  // Transform\n  scale: scale,\n  offset: offset,\n  delta: delta,\n  fluctuation: fluctuation,\n  // Filter Series\n  top: _.partial(extraction, 'top'),\n  bottom: _.partial(extraction, 'bottom')\n};\n\n// Transform\n\nfunction scale(factor, datapoints) {\n  return _.map(datapoints, (point) => {\n    return [point[0] * factor, point[1]];\n  });\n}\n\nfunction offset(delta, datapoints) {\n  for (let i = 0; i < datapoints.length; i++) {\n    datapoints[i] = [\n      datapoints[i][0] + delta,\n      datapoints[i][1]\n    ];\n  }\n\n  return datapoints;\n}\n\nfunction delta(datapoints) {\n  let newSeries = [];\n  let deltaValue;\n  for (let i = 1; i < datapoints.length; i++) {\n    deltaValue = datapoints[i][0] - datapoints[i - 1][0];\n    newSeries.push([deltaValue, datapoints[i][1]]);\n  }\n  return newSeries;\n}\n\nfunction fluctuation(datapoints) {\n  let newSeries = [];\n  let flucValue;\n  for (let i = 0; i < datapoints.length; i++) {\n    flucValue = datapoints[i][0] - datapoints[0][0];\n    newSeries.push([flucValue, datapoints[i][1]]);\n  }\n  return newSeries;\n}\n\n// Filter Series\n\nfunction extraction(order, n, orderFunc, timeseriesData) {\n  const orderByCallback = datapointsAggFuncs[orderFunc];\n  const sortByIteratee = (ts) => {\n      return orderByCallback(ts.datapoints);\n  };\n\n  const sortedTsData = _.sortBy(timeseriesData, sortByIteratee);\n  if (order === 'bottom') {\n    return _.slice(sortedTsData, 0, n);\n  } else {\n    return _.reverse(_.slice(sortedTsData, -n));\n  }\n}\n\n// [Support Funcs] Datapoints aggregation functions\n\nconst datapointsAggFuncs = {\n  avg: datapointsAvg,\n  min: datapointsMin,\n  max: datapointsMax,\n  sum: datapointsSum\n};\n\nfunction datapointsAvg(datapoints) {\n  return _.meanBy(datapoints, (point) => {\n    return point[0];\n  });\n}\n\nfunction datapointsMin(datapoints) {\n  const minPoint = _.minBy(datapoints, (point) => {\n    return point[0];\n  });\n  return minPoint[0];\n}\n\nfunction datapointsMax(datapoints) {\n  const maxPoint = _.maxBy(datapoints, (point) => {\n    return point[0];\n  });\n  return maxPoint[0]\n}\n\nfunction datapointsSum(datapoints) {\n  return _.sumBy(datapoints, (point) => {\n    return point[0];\n  });\n}\n\nexport default {\n  get aaFunctions() {\n    return functions;\n  }\n};\n"],"file":"dataProcessor.js"}